; 7,62-мм (3-линейная) винтовка образца 1891 года
;(C) k01jan. Модель/текстуры , анимации ,звуки 
;-----MOSIN-NAGANT M1891/30-----;
; 7,62-мм (3-линейная) винтовка образца 1891 года (винтовка Мосина-Нагана)
;-(правлено SR)-------------------------------------
; калибр 				7,62х54 мм
; длина ствола 				729 мм
; магазин				5
; вес					3,8 кг (без патронов, с оптическим прицелом: 4,3 кг.)
; эффективная дальность стрельбы	3200 шагов = 2 000 м
; прицельная дальность			3000 м
; дульная скорость пули			870 м/с
; темп стрельбы				10 в/м
;---------------------------------------------------

; Винтовка мосина обр.1893/30 с прицелом ПУ (заряжание по-одному патрону)
;--------------------------------------
[wpn_mosin_sni]:identity_immunities,base_wpn_zoom
GroupControlSection			= spawn_group
discovery_dependency 		= 
$spawn                   	= "weapons\mosin_sni"
$npc			 			= on
$prefetch 		 			= 8
scheduled                	= off
cform                    	= skeleton
class                    	= WP_SHOTG
min_radius               	= 0
max_radius               	= 60
description					= enc_weapons1_wpn-m1891_sniper

ef_main_weapon_type			= 1
ef_weapon_type				= 7

holder_range_modifier		= 0.9
holder_fov_modifier			= 1.3

tri_state_reload			= on

cost					 	= 3500
weapon_class			 	= shotgun

ammo_elapsed		 		= 5
ammo_mag_size		 		= 5
ammo_class					= ammo_7.62x54_7h1, ammo_7.62x54_7h14, ammo_7.62x54_ap

;-----------------------------------------------------------------------------------
;базовая дисперсия
fire_dispersion_base		= 0.07		;валовая 0.096		;0.09 СВД со щекой0.09 СВД со щекой
disp_rate 					= 1.85

cam_relax_speed         			= 7.0
cam_relax_speed_ai        			= 120.75
cam_dispersion          			= 3.0
cam_dispersion_inc					= 0.0
cam_dispertion_frac					= 1.0   
cam_max_angle						= 12
cam_max_angle_horz					= 9.0
cam_step_angle_horz					= 1.5

fire_dispersion_condition_factor 	= 7
misfire_probability 				= 0.0
misfire_condition_k					= 0.05
condition_shot_dec 					= 0.0001

hand_dependence 	 		= 1
single_handed				= 0

slot 				 		= 2
animation_slot		 		= 9

inv_name					= wpn-m1891
inv_name_short				= wpn-m1891_sniper_s
inv_weight					= 4.6		;4.3 +0.27 ПУ

inv_grid_width				= 6
inv_grid_height				= 2
inv_grid_x			= 66
inv_grid_y			= 39				;снайперка с несъёмным ПУ 39

kill_msg_x					= 171
kill_msg_y					= 104
kill_msg_width				= 75
kill_msg_height				= 20

direction                	= 0, 0, 1
shell_point				 	= 0.0, 0.180, 0.647
fire_point               	= 0.0, 0.158, 0.947
fire_point2              	= 0.0, 0.158, 0.947

flame_particles		    	= weapons\generic_weapon06
smoke_particles		   		= weapons\generic_shoot_00
rpm_empty_click 	   		= 200

PDM_disp_base 				= 2.2
PDM_disp_vel_factor 		= 1.7
PDM_disp_accel_factor 		= 1.7
PDM_crouch	 				= 1.0
PDM_crouch_no_acc 			= 1.0

; ttc
hit_power           = 0.93		;0.96		;ОГСЕ 1.2
hit_impulse		 	= 30
hit_type 			= fire_wound
hit_rate			= 2.0

fire_distance       = 500   ;КОЭФФИЦИЕНТ максимальной дистанции выстрела (АМК 205)
bullet_speed		= 870	;КОЭФФИЦИЕНТ начальной скорости пули (АМК 450), реальная 870 м/с
rpm                 = 45	;реальная 30 в/мин

silencer_hit_power       	= 0.90		;0.925		;0.945		;0.91
silencer_hit_impulse	 	= 30
silencer_fire_distance   	= 500		;
silencer_bullet_speed	 	= 730		;280
; end ttc

hud                      	= wpn_mosin_sni_hud

normal                   	= 0, 1, 0
position 					= -0.024, -0.097, 0
orientation              	= 0, 0, 0 

strap_position         		= -0.26,-0.10,0.05
strap_orientation      		= -15,-9,110
strap_bone0					= bip01_spine2
strap_bone1					= bip01_spine1

startup_ammo             	= 5
visual 						= weapons\mosin\wpn_mosin_sn.ogf

light_color		 			= 0.6,0.5,0.3
light_range		 			= 6.0
light_var_color		 		= 0.05
light_var_range		 		= 0.5
light_time 		 			= 0.2

scope_status 			 = 0	;1 - для второго (ОГСР) режима прицеливания будет использоваться текстура (ПЫС-вариант); 0 -  3D оптика ОГСР (сквозная, модель+шейдер)
silencer_status				= 2
grenade_launcher_status		= 0

scope_name 					= wpn_addon_scope_pu
scope_x 					= 77	;47
scope_y 					= -12	;5
zoom_enabled				= true
;для несъёмного - не наследуется! 
scope_texture				= wpn\scopes\crosshair_pu
;наследуется разрешить ПНВ nightvision_lock	= true

;******************************************************************************
scope_zoom_factor      = 1 ;ставить для 3D-прицелов
scope_lense_fov_factor = 5 ;FOV в 3D прицеле
; Худ фов во время прицеливания, чтобы ствол был близко к камере и не залазил в камеру при выстреле
scope_lense_hud_fov    = 0.15
; Инерция мышки в прицеле
scope_inertion_factor  = 5
;******************************************************************************

silencer_name  				= wpn_addon_sil_762_tgp-v
silencer_x 					= 268 
silencer_y 					= 10



snd_draw					= weapons\mosin\mosin_draw
snd_holster					= weapons\mosin\mosin_holster
snd_shoot					= weapons\mosin\mosin_shoot
snd_silncer_shot			= weapons\mosin\mosin_shoot_sil
snd_empty					= weapons\mosin\mosin_empty
snd_reload					= weapons\mosin\mosin_norm_reload_clip

snd_shoot_duplet			= weapons\mosin\mosin_shoot
snd_open_weapon				= weapons\mosin\mosin_sni_reload_open
snd_add_cartridge			= weapons\mosin\mosin_sni_reload_add
snd_close_weapon			= weapons\mosin\mosin_sni_reload_close

silencer_smoke_particles 	= weapons\generic_shoot_00
silencer_light_color		= 0.6,0.5,0.3
silencer_light_range		= 0.01
silencer_light_var_color	= 0.05
silencer_light_var_range	= 0.5
silencer_light_time 		= 0.2

[wpn_mosin_sni_hud]

allow_inertion				= true

shell_point		 			= 0.0, 0.0, 0.0
fire_point 					= 0.0, 0.04, 0.2
fire_point2					= 0.0, 0.0, 0.0
fire_bone 					= wpn_body
orientation 				= 0, 0, 0
position 					= 0.035, 0, 0.2
visual 						= weapons\mosin\wpn_mosin_sn_hud.ogf

anim_idle					= idle
anim_reload					= draw
anim_draw					= draw
anim_holster				= holster
anim_shoot					= shoot_sniper
anim_shoot_both 			= shoot_sniper
anim_idle_aim				= idle_aim
anim_idle_sprint			= idle_sprint

anim_open_weapon			= reload_sni_open
anim_add_cartridge			= reload_sni_add
anim_close_weapon			= reload_sni_close

;;;;;;;;;;;;;;;;;;;;;;Прицеливание через оптику (перекрывается текстуроЙ)
;прицеливание по умолчанию (по-старому, через "оптику" - ТЕКСТУРОЙ), альтернативное ОГСЕ (мех.прицел, МОДЕЛЬЮ) сбрасывается при установке любого аддона, включая ПЫС-подствол)
zoom_offset			= -0.100160,0.001790,-0.312999
zoom_rotate_x		= 0.000700
zoom_rotate_y		= 0.000100

;;;;;;;;;;;;;;;;;;;;;;Альтернативное прицеливание ОГСР через штатный механический прицел
;смещения HUD для режима приближения (прицеливание без увеличения)
;далеко-second_zoom_offset					= -0.0995, 0.0303, -0.145000
second_zoom_offset			= -0.099500,0.030300,-0.284000
second_zoom_rotate_x				= 0.0
second_zoom_rotate_y				= 0.0

zoom_hide_crosshair			= true

zoom_rotate_time			= 0.3
rotate_time					= 0.3

[wpn_mosin_sni_repair]
tech_complication 			= 250
repair_compatibility 		= mosina


; Винтовка мосина обр.1893/30 пехотная (заряжание через обойму)
;--------------------------------------
[wpn_mosin_normal]:identity_immunities,base_wpn_zoom
GroupControlSection			= spawn_group
discovery_dependency		= 
$spawn              		= "weapons\mosin_normal"
$npc						= on				
$prefetch 					= 8
scheduled					= off
cform               		= skeleton
class               		= WP_LR300
min_radius          		= 0
max_radius          		= 100
description					= enc_weapons1_wpn-m1891
	
ef_main_weapon_type			= 2
ef_weapon_type				= 6

holder_range_modifier		= 0.9
holder_fov_modifier			= 1.3

cost						= 4300
weapon_class				= assault_rifle
	
fire_modes		        	= 1

hand_dependence				= 1
single_handed				= 0
	
slot 						= 2	
animation_slot				= 2	

inv_name	        		= wpn-m1891		
inv_name_short				= wpn-m1891_s	
inv_weight					= 4.3

inv_grid_width				= 6
inv_grid_height				= 2 
inv_grid_x			= 66
inv_grid_y			= 37

kill_msg_x					= 0
kill_msg_y					= 123
kill_msg_width				= 69
kill_msg_height				= 30

ammo_elapsed		 		= 5
ammo_mag_size		 		= 5
ammo_class					= ammo_7.62x54_7h1, ammo_7.62x54_7h14, ammo_7.62x54_ap

fire_dispersion_base		= 0.096		;снайперская 0.07		;0.09 СВД со щекой
disp_rate 					= 1.85


cam_relax_speed         			= 7.0
cam_relax_speed_ai        			= 120.75
cam_dispersion          			= 3.0
cam_dispersion_inc					= 0.0
cam_dispertion_frac					= 1.0   
cam_max_angle						= 12
cam_max_angle_horz					= 9.0
cam_step_angle_horz					= 1.5

fire_dispersion_condition_factor 	= 7
misfire_probability 				= 0.0
misfire_condition_k					= 0.05
condition_shot_dec 					= 0.0001

direction                	= 0, 0, 1
shell_point				 	= 0.0, 0.180, 0.647
fire_point               	= 0.0, 0.158, 0.947
fire_point2              	= 0.0, 0.158, 0.947

flame_particles		    	= weapons\generic_weapon06
smoke_particles		   		= weapons\generic_shoot_00
rpm_empty_click 	   		= 200

PDM_disp_base 				= 2.2
PDM_disp_vel_factor 		= 1.7
PDM_disp_accel_factor 		= 1.7
PDM_crouch	 				= 1.0
PDM_crouch_no_acc 			= 1.0

; ttc
hit_power           = 0.93		;0.96		;ОГСЕ 1.2
hit_impulse		 	= 30
hit_type 			= fire_wound
hit_rate			= 2.0

fire_distance       = 500   ;КОЭФФИЦИЕНТ максимальной дистанции выстрела (АМК 205)
bullet_speed		= 860	;КОЭФФИЦИЕНТ начальной скорости пули (АМК 450), реальная 870 м/с
rpm                 = 45	;реальная 30 в/мин

silencer_hit_power       	= 0.90		;0.91
silencer_hit_impulse	 	= 30
silencer_fire_distance   	= 500		;
silencer_bullet_speed	 	= 720		;280
; end ttc

hud                      	= wpn_mosin_normal_hud

normal                   	= 0, 1, 0
position 					= -0.024, -0.097, 0
orientation              	= 0, 0, 0 

strap_position         		= -0.26,-0.10,0.05
strap_orientation      		= -15,-9,110
strap_bone0					= bip01_spine2
strap_bone1					= bip01_spine1

visual                   	= weapons\mosin\wpn_mosin.ogf

light_color					= 0.6,0.5,0.3
light_range					= 5
light_var_color				= 0.05						
light_var_range				= 0.5
light_time 					= 0.2						

scope_status				= 0
silencer_status				= 2
grenade_launcher_status		= 0

zoom_enabled				= true

;Сменные аддоны ОГСЕ д/б: 
scope_name = wpn_scope
scope_x 					= 47
scope_y 					= 5

silencer_name  				= wpn_addon_sil_762_tgp-v
silencer_x 					= 268 
silencer_y 					= 10				

grenade_launcher_name 		= wpn_addon_grenade_launcher
grenade_launcher_x 			= 112
grenade_launcher_y 			= 17

snd_draw					= weapons\mosin\mosin_draw
snd_holster					= weapons\mosin\mosin_holster
snd_shoot					= weapons\mosin\mosin_shoot
snd_empty					= weapons\mosin\mosin_empty
snd_reload					= weapons\mosin\mosin_norm_reload_clip
snd_silncer_shot			= weapons\mosin\mosin_shoot_sil

snd_shoot_grenade			= weapons\gp30\gp30_grenshoot
snd_reload_grenade			= weapons\gp30\gp30_grenload, 1.0, 0.8
snd_switch					= weapons\gp30\gp30_switch, 1.0, 0.5

silencer_smoke_particles 	= weapons\generic_shoot_00

silencer_light_color		= 0.6,0.5,0.3
silencer_light_range		= 0.01
silencer_light_var_color	= 0.05
silencer_light_var_range	= 0.5
silencer_light_time 		= 0.2

[wpn_mosin_normal_hud]

allow_inertion				= true

shell_point         		= 0.0, 0.0, 0.0
shell_dir		    		= 0.0, 0.0, 0.0

fire_point 					= 0.0, 0.04, 0.2
fire_point2 				= 0.0,0.0,0.0
fire_bone 					= wpn_body

orientation					= 0, 0, 0	
position 					= 0.035, 0, 0.2
visual 						= weapons\mosin\wpn_mosin_hud.ogf

anim_idle					= idle
anim_idle_aim				= idle_aim
anim_reload					= reload_clip
anim_draw					= draw
anim_holster				= holster
anim_shoot					= shoot_normal
anim_idle_sprint			= idle_sprint

zoom_offset			= -0.099500,0.030300,-0.284000
zoom_rotate_x				= 0.0
zoom_rotate_y				= 0.0

zoom_hide_crosshair			= true

zoom_rotate_time			= 0.3
rotate_time					= 0.3

[wpn_mosin_normal_repair]
tech_complication 			= 250
repair_compatibility 		= mosina


; "Смерть председателя" - обрез винтовки Мосина обр.1893/30 (заряжание через обойму)
;--------------------------------------
[wpn_mosin_short]:wpn_mosin_normal
description					= enc_weapons1_wpn-m1891_short
inv_name	        		= wpn-m1891	
inv_name_short				= wpn-m1891_short_s
inv_weight					= 2.7
inv_grid_width				= 3	
inv_grid_height				= 1
inv_grid_x			= 72
inv_grid_y			= 37
fire_point               	= 0.0, 0.158, 0.547
fire_point2              	= 0.0, 0.158, 0.547
slot 						= 1


fire_dispersion_base		= 0.5
cam_dispersion          	= 30.0
hit_power           = 0.8		;0.96
visual                   	= weapons\mosin\wpn_mosin_short.ogf
silencer_status				= 0
hud                      	= wpn_mosin_short_hud

[wpn_mosin_short_hud]:wpn_mosin_normal_hud
fire_point 					= 0.0, 0.05, 0.06
visual 						= weapons\mosin\wpn_mosin_short_hud.ogf
anim_shoot					= shoot_short

zoom_offset			= -0.099500,0.038300,-0.060000
zoom_rotate_x		= 0.006000
zoom_rotate_y		= 0.000000



[wpn_mosin_short_repair]
tech_complication 			= 250
repair_compatibility 		= mosina